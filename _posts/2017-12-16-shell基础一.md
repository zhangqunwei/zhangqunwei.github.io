---
layout: post
title: shell基础一
date: 2017-12-16
tags: 脚本
---

### shell概述
* shell：接收用户命令，然后调用相应的应用程序
* shell脚本：将一连串的命令放到shell脚本文件中，运行该脚本即可运行脚本文件中的一连串命令。类似Windows中的批处理文件


### shell变量               
1. shell变量的定义    
 * `变量名=值`　定义本地变量   
        例：# Name=zhang        
 * `declare -x`　定义环境变量  
        例：#declare -x Name=zhang       
**注意：在定义变量时前面没有$，第一个字符不能是数字,等号两边不能有空格**     
2. shell变量的删除    
 * `#unset 变量名`　取消变量   
        例：# unset Name        
 * `declare +x`　取消环境变量  
        例：#declare +x Name      
3. 查看shell变量  
 * `# set` 显示所有的变量（包括本地变量和环境变量 ）  
 * `# env (export或者export -p)`  显示所有的环境变量  
 * `# echo $变量名`  
        例：# echo $Name           
**注意：此处变量名前面要加$，如果不加$,shell 会把变量名当作普通字符打印出来**  
`/etc/profile`（该文件是linux当中一个重要的环境变量配置文件）

#### **echo (类似C语言中的printf)**
格式：echo [选项][输出内容]  
关于echo的使用方法，可使用`help echo`或`man echo`命令查看  
* 设置echo输出文字的颜色    
```BASH
# echo -e "\e[1;31m 输出内容 \e[0m"

        30m 黑色，31m 红色，32m 绿色，33m 黄色  
        34m 蓝色，35m 洋红，36m 青色，37m 白色  
```  

### shell脚本执行方式   
shell脚本执行（以.sh 为后缀）
* 方法一：赋予执行权限，直接运行  

        # chmod 755 hello.sh 或 # chmod u+x hello.sh　　赋予可执行权限  
        # ./hello.sh　　用相对路径或者绝对路径运行脚本       
* 方法二：通过Bash调用执行脚本(可以不用给执行权限)  

        # Bash hello.sh  
        
第一个shell脚本：     
```bash
  #!/bin/bash     
  #echo "hello shell"      开头带#号的是注释 
  echo "hello shell" 
```  

**注意: 第一句用以指定用什么shell执行该脚本，它不是注释**                      
`# dos2linux `　　将dos格式shell转换成linux格式shell

### 历史命令与补全
#### __历史命令__  
格式：history [选项] [历史命令保存文件]  
选项：  
-c：   清空历史命令（特殊情况下清空）  
-w：  把缓存中的历史命令写入历史命令保存文件（~/.bash_history）中  
  
**注意:历史命令默认会保存1000条，可以在环境变量配置文件/etc/profile中进行修改**  
修改方法：打开`/etc/profile`文件找到如下信息  

        HISTSIZE=1000           hist代表history历史，size代表大小尺寸     
        
历史命令保存文件命令装满的时候它会依次从第一条开始删除装入新的历史命令              
**历史命令的调用**     
* 通过上下键来调用  
* 使用“!n”重复执行第n条历史命令  
* 使用“!!”重复执行上一条命令  
* 使用“!字符”重复执行最后一条以该字符串开头的命令  

#### __补全__      
tab键命令补全，使用tab键补全时，按两下tab键显示所有的可以补全的部分    

### 别名与快捷键

#### __命令别名__  
* 设定命令别名： `# alias 别名='原命令'` 
* 查询命令别名： `# alias` 
* 删除别名： `unalias 别名`  
* 命令执行顺序：  
        1.第一顺位执行用绝对路径或相对路径执行的命令  
        2.第二顺位执行别名  
        3.第三顺位执行bash的内部命令  
        4.第四顺位执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令 
  
**注意:在命令行定义的别名它只会临时生效，当系统重启之后就会消失在linux当中，要想永久生效，归根结底是写入相应的配置文件**    
别名永久生效的方法:    
在`/用户名/.bashrc`中添加   

        #alias 别名='原命令'     
        
**注意：别名的名字如果和系统原有的命令名相同，则别名会覆盖掉系统命令，转而执行别名所对应的原命令**

#### __快捷键（靠前的是常用的）__

:--:    |    
ctrl+A   |       把光标移动到命令行开头  
ctrl+E   |       把光标移动到命令行结尾  
ctrl+C   |       强制终止当前的命令  
ctrl+L   |       清屏，相当于clear命令  
ctrl+U   |       删除和剪切光标之前的命令  
ctrl+K   |       删除和剪切光标之后的命令  
ctrl+Y   |       粘贴ctrl+U或ctrl+K剪切的内容  
ctrl+R   |      在历史命令中搜索，按下之后，就会出现搜索界面，只要输入搜索内容，就会从历史命令中搜索  
ctrl+D   |      退出当前终端  
ctrl+Z   |      暂停，并放入后台。牵扯到工作管理的内容，在系统管理章节介绍  
ctrl+S   |      暂停屏幕输出  
ctrl+Q   |      恢复屏幕输出  

